(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{yI65:function(l,n,i){"use strict";i.r(n);var u=i("8Y7J");class t{}var a=i("pMnS"),e=i("t68o"),o=i("+Rcp"),c=i("1u6y"),r=i("lzlj"),s=i("iInd"),b=i("igqZ"),d=i("SVse"),p=i("LRne");class m{}class h extends m{}class f{constructor(l){this.exhibitors=[{id:0,name:"painter"},{id:1,name:"sculptor"},{id:2,name:"drawer"},{id:3,name:"musician"},{id:4,name:"artist"},{id:5,name:"singer"}],this.occasions=[];let n=[],i=new h;i.number=1,i.assignedExhibitorId=1,i.assignedExhibitor=this.exhibitors[1],n.push(i),(i=new h).number=2,i.assignedExhibitorId=2,i.assignedExhibitor=this.exhibitors[2],n.push(i),(i=new h).number=3,n.push(i),(i=new h).number=4,n.push(i),(i=new h).number=5,n.push(i),this.occasions=[{id:0,name:"2018",blueprint:{elements:[]}},{id:1,name:"2019",blueprint:{elements:[n[0],n[1],n[2],n[3],n[4]]}}]}getOccasions(){return Object(p.a)(this.occasions)}getOccasionById(l){let n=this.occasions.findIndex(n=>n.id===l);return Object(p.a)(this.occasions[n])}getExhibitors(){return Object(p.a)(this.exhibitors)}allocate(l,n,i){let u=this.occasions.findIndex(n=>n.id===l);if(-1!==u){let l=this.occasions[u].blueprint.elements.find(l=>l.number==n);l&&(l.assignedExhibitorId=i,l.assignedExhibitor=this.exhibitors.find(l=>l.id===i))}return Object(p.a)(!0)}free(l,n){let i=this.occasions.findIndex(n=>n.id===l);if(-1!==i){let l=this.occasions[i].blueprint.elements.find(l=>l.number==n);l&&(l.assignedExhibitorId=null,l.assignedExhibitor=null)}return Object(p.a)(!0)}}class g{constructor(l){this.service=l}ngOnInit(){this.occasions$=this.service.getOccasions()}}var x=u.nb({encapsulation:0,styles:[[""]],data:{}});function z(l){return u.Jb(0,[(l()(),u.pb(0,0,null,null,6,"div",[["class","col-sm-12 col-md-6 col-lg-3"]],null,null,null,null,null)),(l()(),u.pb(1,0,null,null,5,"mat-card",[["class","clickable mat-card"]],null,[[null,"click"]],function(l,n,i){var t=!0;return"click"===n&&(t=!1!==u.zb(l,2).onClick()&&t),t},r.d,r.a)),u.ob(2,16384,null,0,s.l,[s.k,s.a,[8,null],u.C,u.k],{routerLink:[0,"routerLink"]},null),u.ob(3,49152,null,0,b.a,[],null,null),(l()(),u.pb(4,0,null,0,2,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),u.ob(5,16384,null,0,b.b,[],null,null),(l()(),u.Hb(6,null,[" "," "]))],function(l,n){l(n,2,0,u.rb(1,"",n.context.$implicit.id,""))},function(l,n){l(n,6,0,n.context.$implicit.name)})}function v(l){return u.Jb(0,[(l()(),u.pb(0,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(l()(),u.fb(16777216,null,null,2,null,z)),u.ob(2,278528,null,0,d.k,[u.O,u.L,u.q],{ngForOf:[0,"ngForOf"]},null),u.Bb(131072,d.b,[u.h])],function(l,n){var i=n.component;l(n,2,0,u.Ib(n,2,0,u.zb(n,3).transform(i.occasions$)))},null)}function _(l){return u.Jb(0,[(l()(),u.pb(0,0,null,null,1,"app-organization",[],null,null,null,v,x)),u.ob(1,114688,null,0,g,[f],null,null)],function(l,n){l(n,1,0)},null)}var w=u.lb("app-organization",g,_,{},{},[]),O=i("Mr+X"),k=i("Gi4r"),F=i("bujt"),C=i("Fwaw"),I=i("5GAg"),y=i("omvX"),E=i("dJrM"),S=i("HsOI"),j=i("Xd0L"),L=i("IP0z"),$=i("/HVE"),J=i("s7LF"),q=i("ZwOa"),M=i("oapL"),H=i("5+tZ"),A=i("pLZG"),P=i("aA8x"),Z=i("YZKV");class N{constructor(l,n,i){this.route=l,this.service=n,this.dialogService=i,this.filteredSpots=[]}get filter(){return this._filter}set filter(l){this._filter=l?l.trim():void 0,this.applyFilter()}ngOnInit(){this.route.paramMap.subscribe(l=>this.loadOccasion(parseInt(l.get("id"))))}loadOccasion(l){this.service.getOccasionById(l).subscribe(l=>{this.occasion=l,this.resetFilter()})}allocateSpot(l){this.service.getExhibitors().pipe(Object(H.a)(n=>{let i=n.map(l=>new Z.b(`${l.id}`,l.name)),u=[new Z.a({key:"exhibitor",i18nTag:"input-select-exhibitor",value:l.assignedExhibitor?`${l.assignedExhibitor.id}`:null,options:i})];return this.dialogService.input(null,null,u)})).pipe(Object(A.a)(l=>l)).pipe(Object(H.a)(n=>this.service.allocate(this.occasion.id,l.number,parseInt(n.exhibitor)))).subscribe(l=>this.loadOccasion(this.occasion.id))}freeSpot(l){this.service.free(this.occasion.id,l.number).subscribe(l=>this.loadOccasion(this.occasion.id))}applyFilter(){let l=this.occasion.blueprint.elements.filter(l=>l instanceof h).map(l=>l);this.filter&&""!==this.filter&&(l=l.filter(l=>`${l.number}`.includes(this.filter)||l.assignedExhibitor&&l.assignedExhibitor.name.includes(this.filter))),this.filteredSpots=l}resetFilter(){this.filter=void 0,this.applyFilter()}}var V=u.nb({encapsulation:0,styles:[[".free-spot[_ngcontent-%COMP%]{background-color:#adff2f}.allocated-spot[_ngcontent-%COMP%]{background-color:#dcdcdc}"]],data:{}});function B(l){return u.Jb(0,[(l()(),u.pb(0,0,null,null,3,"div",[["class","col-auto"]],null,null,null,null,null)),(l()(),u.pb(1,0,null,null,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],function(l,n,i){var u=!0;return"click"===n&&(l.component.freeSpot(l.parent.context.$implicit),u=!1!==i.stopPropagation()&&u),u},O.b,O.a)),u.ob(2,9158656,null,0,k.b,[u.k,k.d,[8,null],[2,k.a]],null,null),(l()(),u.Hb(-1,0,["link_off"]))],function(l,n){l(n,2,0)},function(l,n){l(n,1,0,u.zb(n,2).inline,"primary"!==u.zb(n,2).color&&"accent"!==u.zb(n,2).color&&"warn"!==u.zb(n,2).color)})}function G(l){return u.Jb(0,[(l()(),u.pb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),u.Hb(1,null,["",""]))],null,function(l,n){l(n,1,0,n.parent.context.$implicit.assignedExhibitor.name)})}function K(l){return u.Jb(0,[(l()(),u.pb(0,0,null,null,1,"span",[["style","font-style: italic"]],null,null,null,null,null)),(l()(),u.Hb(-1,null,["Free"]))],null,null)}function T(l){return u.Jb(0,[(l()(),u.pb(0,0,null,null,19,"div",[["class","col-xl-1 col-lg-2 col-md-3 col-sm-4 col-6"]],null,null,null,null,null)),(l()(),u.pb(1,0,null,null,18,"mat-card",[["class","clickable mat-card"]],null,[[null,"click"]],function(l,n,i){var u=!0;return"click"===n&&(u=!1!==l.component.allocateSpot(l.context.$implicit)&&u),u},r.d,r.a)),u.Eb(512,null,d.y,d.z,[u.q,u.r,u.k,u.C]),u.ob(3,278528,null,0,d.j,[d.y],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u.ob(4,49152,null,0,b.a,[],null,null),(l()(),u.pb(5,0,null,0,8,"mat-card-header",[["class","mat-card-header"]],null,null,null,r.c,r.b)),u.ob(6,49152,null,0,b.c,[],null,null),(l()(),u.pb(7,0,null,1,6,"mat-card-title",[["class","mat-card-title"]],null,null,null,null,null)),u.ob(8,16384,null,0,b.g,[],null,null),(l()(),u.pb(9,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(l()(),u.pb(10,0,null,null,1,"div",[["class","col align-self-center"]],null,null,null,null,null)),(l()(),u.Hb(11,null,[" "," "])),(l()(),u.fb(16777216,null,null,1,null,B)),u.ob(13,16384,null,0,d.l,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.pb(14,0,null,0,5,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),u.ob(15,16384,null,0,b.b,[],null,null),(l()(),u.fb(16777216,null,null,1,null,G)),u.ob(17,16384,null,0,d.l,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.fb(16777216,null,null,1,null,K)),u.ob(19,16384,null,0,d.l,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,3,0,"clickable",n.context.$implicit.assignedExhibitor?"allocated-spot":"free-spot"),l(n,13,0,n.context.$implicit.assignedExhibitor),l(n,17,0,n.context.$implicit.assignedExhibitor),l(n,19,0,!n.context.$implicit.assignedExhibitor)},function(l,n){l(n,11,0,n.context.$implicit.number)})}function D(l){return u.Jb(0,[(l()(),u.pb(0,0,null,null,39,"mat-card",[["class","mat-card"]],null,null,null,r.d,r.a)),u.ob(1,49152,null,0,b.a,[],null,null),(l()(),u.pb(2,0,null,0,12,"mat-card-header",[["class","mat-card-header"]],null,null,null,r.c,r.b)),u.ob(3,49152,null,0,b.c,[],null,null),(l()(),u.pb(4,0,null,1,10,"mat-card-title",[["class","mat-card-title"]],null,null,null,null,null)),u.ob(5,16384,null,0,b.g,[],null,null),(l()(),u.pb(6,0,null,null,8,"div",[["class","row"]],null,null,null,null,null)),(l()(),u.pb(7,0,null,null,1,"div",[["class","col"]],null,null,null,null,null)),(l()(),u.Hb(8,null,[" "," "])),(l()(),u.pb(9,0,null,null,5,"div",[["class","col-auto"]],null,null,null,null,null)),(l()(),u.pb(10,0,null,null,4,"button",[["mat-icon-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,n,i){var u=!0,t=l.component;return"click"===n&&(u=!1!==t.loadOccasion(t.occasion.id)&&u),u},F.b,F.a)),u.ob(11,180224,null,0,C.b,[u.k,I.h,[2,y.a]],null,null),(l()(),u.pb(12,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,O.b,O.a)),u.ob(13,9158656,null,0,k.b,[u.k,k.d,[8,null],[2,k.a]],null,null),(l()(),u.Hb(-1,0,["refresh"])),(l()(),u.pb(15,0,null,0,24,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),u.ob(16,16384,null,0,b.b,[],null,null),(l()(),u.pb(17,0,null,null,19,"div",[["class","row"]],null,null,null,null,null)),(l()(),u.pb(18,0,null,null,18,"mat-form-field",[["class","col mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,E.b,E.a)),u.ob(19,7520256,null,9,S.c,[u.k,u.h,[2,j.j],[2,L.b],[2,S.a],$.a,u.x,[2,y.a]],null,null),u.Fb(603979776,1,{_controlNonStatic:0}),u.Fb(335544320,2,{_controlStatic:0}),u.Fb(603979776,3,{_labelChildNonStatic:0}),u.Fb(335544320,4,{_labelChildStatic:0}),u.Fb(603979776,5,{_placeholderChild:0}),u.Fb(603979776,6,{_errorChildren:1}),u.Fb(603979776,7,{_hintChildren:1}),u.Fb(603979776,8,{_prefixChildren:1}),u.Fb(603979776,9,{_suffixChildren:1}),(l()(),u.pb(29,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","Filtre"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(l,n,i){var t=!0,a=l.component;return"input"===n&&(t=!1!==u.zb(l,30)._handleInput(i.target.value)&&t),"blur"===n&&(t=!1!==u.zb(l,30).onTouched()&&t),"compositionstart"===n&&(t=!1!==u.zb(l,30)._compositionStart()&&t),"compositionend"===n&&(t=!1!==u.zb(l,30)._compositionEnd(i.target.value)&&t),"blur"===n&&(t=!1!==u.zb(l,35)._focusChanged(!1)&&t),"focus"===n&&(t=!1!==u.zb(l,35)._focusChanged(!0)&&t),"input"===n&&(t=!1!==u.zb(l,35)._onInput()&&t),"ngModelChange"===n&&(t=!1!==(a.filter=i)&&t),t},null,null)),u.ob(30,16384,null,0,J.d,[u.C,u.k,[2,J.a]],null,null),u.Eb(1024,null,J.l,function(l){return[l]},[J.d]),u.ob(32,671744,null,0,J.q,[[8,null],[8,null],[8,null],[6,J.l]],{model:[0,"model"]},{update:"ngModelChange"}),u.Eb(2048,null,J.m,null,[J.q]),u.ob(34,16384,null,0,J.n,[[4,J.m]],null,null),u.ob(35,999424,null,0,q.b,[u.k,$.a,[6,J.m],[2,J.p],[2,J.i],j.d,[8,null],M.a,u.x],{placeholder:[0,"placeholder"]},null),u.Eb(2048,[[1,4],[2,4]],S.d,null,[q.b]),(l()(),u.pb(37,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(l()(),u.fb(16777216,null,null,1,null,T)),u.ob(39,278528,null,0,d.k,[u.O,u.L,u.q],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var i=n.component;l(n,13,0),l(n,32,0,i.filter),l(n,35,0,"Filtre"),l(n,39,0,i.filteredSpots)},function(l,n){l(n,8,0,n.component.occasion.name),l(n,10,0,u.zb(n,11).disabled||null,"NoopAnimations"===u.zb(n,11)._animationMode),l(n,12,0,u.zb(n,13).inline,"primary"!==u.zb(n,13).color&&"accent"!==u.zb(n,13).color&&"warn"!==u.zb(n,13).color),l(n,18,1,["standard"==u.zb(n,19).appearance,"fill"==u.zb(n,19).appearance,"outline"==u.zb(n,19).appearance,"legacy"==u.zb(n,19).appearance,u.zb(n,19)._control.errorState,u.zb(n,19)._canLabelFloat,u.zb(n,19)._shouldLabelFloat(),u.zb(n,19)._hasFloatingLabel(),u.zb(n,19)._hideControlPlaceholder(),u.zb(n,19)._control.disabled,u.zb(n,19)._control.autofilled,u.zb(n,19)._control.focused,"accent"==u.zb(n,19).color,"warn"==u.zb(n,19).color,u.zb(n,19)._shouldForward("untouched"),u.zb(n,19)._shouldForward("touched"),u.zb(n,19)._shouldForward("pristine"),u.zb(n,19)._shouldForward("dirty"),u.zb(n,19)._shouldForward("valid"),u.zb(n,19)._shouldForward("invalid"),u.zb(n,19)._shouldForward("pending"),!u.zb(n,19)._animationsEnabled]),l(n,29,1,[u.zb(n,34).ngClassUntouched,u.zb(n,34).ngClassTouched,u.zb(n,34).ngClassPristine,u.zb(n,34).ngClassDirty,u.zb(n,34).ngClassValid,u.zb(n,34).ngClassInvalid,u.zb(n,34).ngClassPending,u.zb(n,35)._isServer,u.zb(n,35).id,u.zb(n,35).placeholder,u.zb(n,35).disabled,u.zb(n,35).required,u.zb(n,35).readonly&&!u.zb(n,35)._isNativeSelect||null,u.zb(n,35)._ariaDescribedby||null,u.zb(n,35).errorState,u.zb(n,35).required.toString()])})}function R(l){return u.Jb(0,[(l()(),u.pb(0,0,null,null,1,"app-occasion",[],null,null,null,D,V)),u.ob(1,114688,null,0,N,[s.a,f,P.a],null,null)],function(l,n){l(n,1,0)},null)}var X=u.lb("app-occasion",N,R,{},{},[]),Q=i("POq0"),U=i("QQfA"),W=i("JjoW"),Y=i("s6ns"),ll=i("IheW");class nl{constructor(l){this.service=l}resolve(l,n){return this.service.getOccasionById(parseInt(l.paramMap.get("id")))}}var il=i("cUpR"),ul=i("zMNK"),tl=i("hOhj"),al=i("r0V8"),el=i("TqHZ"),ol=i("CvZm"),cl=i("GKOy"),rl=i("liHq");const sl={permissions:["SpotCanAssign"]},bl={permissions:["SpotCanAssign"]};class dl{}i.d(n,"OrganizationModuleNgFactory",function(){return pl});var pl=u.mb(t,[],function(l){return u.wb([u.xb(512,u.j,u.ab,[[8,[a.a,e.a,o.a,c.a,w,X]],[3,u.j],u.v]),u.xb(4608,d.n,d.m,[u.s,[2,d.D]]),u.xb(4608,J.w,J.w,[]),u.xb(4608,Q.c,Q.c,[]),u.xb(4608,j.d,j.d,[]),u.xb(4608,U.c,U.c,[U.i,U.e,u.j,U.h,U.f,u.p,u.x,d.d,L.b,[2,d.h]]),u.xb(5120,U.j,U.k,[U.c]),u.xb(5120,W.a,W.b,[U.c]),u.xb(4608,J.e,J.e,[]),u.xb(5120,Y.c,Y.d,[U.c]),u.xb(135680,Y.e,Y.e,[U.c,u.p,[2,d.h],[2,Y.b],Y.c,[3,Y.e],U.e]),u.xb(4608,P.a,P.a,[Y.e]),u.xb(4608,f,f,[ll.c]),u.xb(4608,nl,nl,[f]),u.xb(1073742336,d.c,d.c,[]),u.xb(1073742336,s.o,s.o,[[2,s.t],[2,s.k]]),u.xb(1073742336,J.v,J.v,[]),u.xb(1073742336,J.j,J.j,[]),u.xb(1073742336,L.a,L.a,[]),u.xb(1073742336,j.n,j.n,[[2,j.f],[2,il.f]]),u.xb(1073742336,$.b,$.b,[]),u.xb(1073742336,j.w,j.w,[]),u.xb(1073742336,C.c,C.c,[]),u.xb(1073742336,b.e,b.e,[]),u.xb(1073742336,M.c,M.c,[]),u.xb(1073742336,Q.d,Q.d,[]),u.xb(1073742336,S.e,S.e,[]),u.xb(1073742336,q.c,q.c,[]),u.xb(1073742336,k.c,k.c,[]),u.xb(1073742336,ul.g,ul.g,[]),u.xb(1073742336,tl.b,tl.b,[]),u.xb(1073742336,U.g,U.g,[]),u.xb(1073742336,j.u,j.u,[]),u.xb(1073742336,j.s,j.s,[]),u.xb(1073742336,W.d,W.d,[]),u.xb(1073742336,J.s,J.s,[]),u.xb(1073742336,al.d,al.d,[]),u.xb(1073742336,al.c,al.c,[]),u.xb(1073742336,el.a,el.a,[]),u.xb(1073742336,Y.j,Y.j,[]),u.xb(1073742336,ol.a,ol.a,[]),u.xb(1073742336,dl,dl,[]),u.xb(1073742336,t,t,[]),u.xb(256,u.s,"fr",[]),u.xb(1024,s.i,function(){return[[{path:"",component:g,canActivate:[cl.a,rl.a],data:sl},{path:":id",component:N,resolve:{occasion:nl},canActivate:[cl.a,rl.a],data:bl}]]},[]),u.xb(256,u.K,"xlf2",[])])})}}]);